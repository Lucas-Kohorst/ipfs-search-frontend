{{! template-lint-disable no-triple-curlies }}
<div {{action "openModal"}} class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="modal">
  <div class="d-flex w-100 justify-content-between">
    <h5 class="mb-1">{{{hit.title}}}</h5>
    <small class={{availabilityClass}}><span class="d-none d-lg-inline">{{#if hit.last-seen}}Last seen {{moment-from-now hit.last-seen}} {{/if}}</span><i class="fas {{faIcon}}"></i></small>
  </div>
  <p class="mb-1">{{{hit.description}}}</p>
  <small><a href="https://gateway.ipfs.io/ipfs/{{hit.hash}}">{{{hit.hash}}}</a>{{#if hit.size}} - {{hit.size}} bytes{{/if}}</small>
</div>

{{#bs-modal class="modal fade bd-result-modal-lg" size="lg" open=openModal onSubmit=(action (mut openModal)) onHidden=(action (mut openModal) false) as |modal|}}
  {{#modal.header}}
    <h5 class="modal-title">
      {{{hit.title}}}
      <div class="badge"><small class={{availabilityClass}}><span class="d-none d-lg-inline">{{#if hit.last-seen}}Last seen {{moment-from-now hit.last-seen}} {{/if}}</span><i class="fas {{faIcon}}"></i></small></div>
    </h5>
  {{/modal.header}}
  {{#modal.body}}
    <p>{{{hit.description}}}</p>

    <dl class="row mt-3">
      <dt class="col-sm-3">
        Mimetype
      </dt>
      <dd class="col-sm-9">
        {{hit.mimetype}}
      </dd>

      <dt class="col-sm-3">
        First seen
      </dt>
      <dd class="col-sm-9">
        {{moment-from-now hit.first-seen}}
      </dd>

      {{#if hit.size}}
        <dt class="col-sm-3">
          Size
        </dt>
        <dd class="col-sm-9">
          {{hit.size}} bytes
        </dd>
      {{/if}}
    </dl>
    <dl class="row mt-3">
      <dt class="col-sm-3">
        Direct link
      </dt>
      <dd class="col-sm-9">
        <a href="https://gateway.ipfs.io/ipfs/{{hit.hash}}">{{hit.hash}}</a>
      </dd>
    </dl>

    {{#if (eq kind "image")}}
      <div class="embed-responsive">
        <a href="https://gateway.ipfs.io/ipfs/{{hit.hash}}"><img src="https://gateway.ipfs.io/ipfs/{{hit.hash}}" alt="Preview of found image" /></a>
      </div>
    {{/if}}
    {{#if (eq kind "video")}}
      <div class="embed-responsive embed-responsive-16by9">
        <a href="https://gateway.ipfs.io/ipfs/{{hit.hash}}"><video class="embed-responsive-item" src="https://gateway.ipfs.io/ipfs/{{hit.hash}}" controls="" preload="metadata" /></a>
      </div>
      <video src="controls" preload="metadata" />
    {{/if}}
    {{#if (eq kind "audio")}}
      <div class="embed-responsive">
        <a href="https://gateway.ipfs.io/ipfs/{{hit.hash}}">
          <audio controls="controls">
            <source src="https://gateway.ipfs.io/ipfs/{{hit.hash}}">
          </audio>
        </a>
      </div>
    {{/if}}
  {{/modal.body}}
{{/bs-modal}}
